# A6: Indexes, triggers, user functions and population

This artefact contains the physical schema of the database, the identification and characterisation of the indexes, the support of data integrity rules with triggers and the definition of the database user-defined functions of our **Project Management** Web Application. This artefact also contains the database's workload as well as the complete database creation script, including all SQL necessary to define all integrity constraints, indexes and triggers.

## 1. Database Workload
### 1.1. Tuple Estimation

| Relation reference | Relation Name    | Order of magnitude        | Estimated growth   |
| ------------------ | ---------------- | ------------------------- | ------------------ |
| R01                | UserTable        | hundreds                  | tens per month     |
| R02                | Task             | thousands                 | hundreds per month |
| R03                | Assigned         | thousands                 | hundreds per day   |
| R04                | EditTaskInfo     | tens                      | units per day      |
| R05                | CloseRequest     | thousands                 | hundreds per month |
| R06                | Tag              | tens                      | units per week     |
| R07                | Tagged           | thousands                 | hundreds per month |
| R08                | Comment          | thousands                 | hundreds per month |
| R09                | Project          | tens                      | units per month    |
| R10                | Joined           | hundreds                  | tens per month     |
| R11                | PremiumSignature | tens                      | units per month    |
| R12                | ForumPost        | hundreds                  | tens per week      |
| R13                | Reply            | thousands                 | tens per week      |
| R14                | Country          | hundreds                  | no growth          |
| R15                | Admin            | units                     | no growth          |
| R16                | BannedRecord     | tens                      | units per month    |

<!-- Orders of magnitude units tens hundreds thousands  -->

### 1.2. Frequent Queries

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT01</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Get All Users</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>hundreds per day</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT username, email, gender, description
FROM plenum.UserTable;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT02</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Get User's Information</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>hundreds per day</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT username, email, gender, description
FROM plenum.UserTable
WHERE UserTable.idUser= $idUser;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT03</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Get All User's Assigned Tasks Name</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>hundreds per day</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT DISTINCT Task.title
FROM plenum.Assigned, plenum.Task, plenum.UserTable
WHERE Assigned.idUser=$idUser
AND Assigned.idTask = Task.idTask;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT04</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Get All User's Projects Name</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>tens per day</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT Project.name
FROM plenum.Project, plenum.Joined, plenum.UserTable
WHERE Project.idProject=Joined.idProject
AND Joined.idUser=UserTable.idUser
AND UserTable.idUser = $idUser;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT05</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Check if User is Premium</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>tens per day</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT premium
FROM plenum.UserTable
WHERE UserTable.idUser = $idUser;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT06</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Get User PremiumSignature Information</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>tens per day</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT startDate, duration, name
FROM plenum.PremiumSignature, plenum.UserTable
WHERE UserTable.idUser= PremiumSignature.idUser
AND UserTable.idUser = $idUser;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT07</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Check if User is Banned</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>tens per day</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT banned
FROM plenum.UserTable
WHERE UserTable.idUser = $idUser;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT08</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Get User BannedRecord Information</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>tens per month</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT startDate, duration, motive
FROM plenum.UserTable, plenum.BannedRecord
WHERE UserTable.idUser = $idUser
AND UserTable.idUser = BannedRecord.idUser;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT09</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Get Project's Information</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>tens per day</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT creationDate, name, description
FROM plenum.Project
WHERE idProject = $idProject;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT10</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Check if Project is Public/Private</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>tens per day</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT private
FROM plenum.Project
WHERE idProject = $idProject;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT11</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Get Project's Team Owner</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>tens per day</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT DISTINCT UserTable.username, UserTable.name,UserTable.email
FROM plenum.UserTable, plenum.Joined, plenum.Project
WHERE Joined.idProject=$idProject
AND Joined.role = 'Owner'
AND Joined.idUser=UserTable.idUser;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT12</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Get Project's Team Coordinators</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>tens per day</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT DISTINCT UserTable.username, UserTable.name,UserTable.email
FROM plenum.UserTable, plenum.Joined, plenum.Project
WHERE Joined.idProject=$idProject
AND Joined.role = 'Coordinator'
AND Joined.idUser=UserTable.idUser;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT13</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Get Project's Team Members</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>tens per day</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT DISTINCT UserTable.username, UserTable.name,UserTable.email
FROM plenum.UserTable, plenum.Joined, plenum.Project
WHERE Joined.idProject=$idProject
AND Joined.role = 'Member'
AND Joined.idUser=UserTable.idUser;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT14</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Get User's Forum Post ( by lastEditDate )</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>tens per day</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT ForumPost.title, ForumPost.creationDate, ForumPost.lastEditDate
FROM plenum.ForumPost, plenum.UserTable
WHERE ForumPost.idUser = UserTable.idUser
AND UserTable.idUser = $idUser
ORDER BY ForumPost.lastEditDate;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT15</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Get User's Post Replies</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>tens per day</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT DISTINCT Reply.creationDate, Reply.content, Reply.idPost
FROM plenum.Reply, plenum.ForumPost, plenum.UserTable
WHERE Reply.idUser = $idUser;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT16</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Get All User's Tasks ( by earlist deadline)</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>tens per day</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT title, deadline
FROM plenum.UserTable, plenum.Task, plenum.Assigned
WHERE UserTable.idUser = 1
AND Assigned.idUser = UserTable.idUser
AND Assigned.idTask = Task.idTask
AND deadline > CURRENT_DATE
ORDER BY deadline ASC;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT17</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Get All Project's Non Completed Tasks</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>tens per day</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT Task.title, Task.deadline
FROM plenum.Task, plenum.Project
WHERE Project.idProject = $idProject
AND Task.idProject = Project.idProject
AND Task.completed=false;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT18</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Get All Project's Completed Tasks</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>tens per day</td>
      </tr>
  </tbody>
</table>

```SQL
SELECT Task.title, Task.deadline
FROM plenum.Task, plenum.Project
WHERE Project.idProject = $idProject
AND Task.idProject = Project.idProject
AND Task.completed=true;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT19</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Get All Project's Non Assigned Tasks</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>tens per day</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT Task.title, Task.deadline
FROM plenum.Task, plenum.Project, plenum.Assigned
WHERE Project.idProject = $idProject
AND Task.idProject = Project.idProject
AND Assigned.idTask = Task.idTask
AND Assigned.idUser IS NULL;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT20</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Get Task Information</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>hundreds per day</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT title, creationDate,lastEditDate, description, deadline
FROM plenum.Task
WHERE Task.idTask= $idTask;
```

<table>
  <tbody>
      <tr>
          <td><b>Query reference</b></td>
          <td>SELECT21</td>
      </tr>
      <tr>
          <td><b>Query description</b></td>
          <td>Get Task's Comments</td>
      </tr>
      <tr>
          <td><b>Query frequency</b></td>
          <td>hundreds per day</td>
      </tr>
    </tbody>
</table>

```SQL
SELECT Comment.creationDate, Comment.lastEditDate, Comment.content, UserTable.name, Comment.idParent
FROM plenum.Comment, plenum.UserTable, plenum.Task
WHERE Task.idTask = $idTask
AND Comment.idUser = UserTable.idUser
AND Comment.idTask = Task.idTask;
```

### 1.3. Frequent Updates

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>INSERT01</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>New User registered.</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Dozens per month</td>
    </tr>
  </tbody>
</table>

```SQL
INSERT INTO UserTable (username, password, email, name, gender, address,institution, description, birthDate, idCountry)
VALUES ($username, $password, $email, $name, $gender, $address, $institution, $description, $birthDate, $idCountry);
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>INSERT02</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>New Project created.</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Dozens per month</td>
    </tr>
  </tbody>
</table>

```SQL
INSERT INTO Project(creationDate, name, description, private, idForum)
VALUES ($creationDate, $name, $description, $private, $idForum);
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>INSERT03</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>New Task created.</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Dozens per month</td>
    </tr>
  </tbody>
</table>

```SQL
INSERT INTO Task(creationDate, lastEditDate, title, description, deadline, completed, completedDate, idUser, idProject)
VALUES ($creationDate, $lastEditDate, $title, $description, $deadline, $completed, $completedDate, $idUser, $idProject);
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>INSERT04</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>New Comment created.</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Dozens per day</td>
    </tr>
  </tbody>
</table>

```SQL
INSERT INTO Comment(creationDate, lastEditDate, content, idTask, idUser, idComment)
VALUES ($creationDate, $lastEditDate, $content, $idTask, $idUser, $idComment);
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>INSERT05</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>New Premium Signature.</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Once per day</td>
    </tr>
  </tbody>
</table>

```SQL
INSERT INTO PremiumSignature(startDate, duration, idUser)
VALUES ($startDate, $duration, $idUser);
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>INSERT06</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>New Forum Post.</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Dozens per day</td>
    </tr>
  </tbody>
</table>

```SQL
INSERT INTO ForumPost(creationDate, lastEditDate, title, content, idForum, idUser)
VALUES ($creationDate, $lastEditDate, $title, $content, $idForum, $idUser);
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>INSERT07</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>New Admin created.</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Dozens per day</td>
    </tr>
  </tbody>
</table>

```SQL
INSERT INTO Admin(username, password, email)
VALUES ($username, $password, $email);
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>INSERT09</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>User Assigned to Task.</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Dozens per day</td>
    </tr>
  </tbody>
</table>

```SQL
INSERT INTO Assigned(idUser, idTask)
VALUES ($idUser, $idTask);
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>INSERT10</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>New Close Request.</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Dozens per week</td>
    </tr>
  </tbody>
</table>

```SQL
INSERT INTO CloseRequest(creationDate, title, description, approved, idUser, idTask)
VALUES ($creationDate, $title, $description, $approved, $idUser, $idTask);
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>INSERT11</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>New Reply created.</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Dozens per week</td>
    </tr>
  </tbody>
</table>

```SQL
INSERT INTO Reply( creationDate, lastEditDate, content, idPost, idUser)
VALUES ($creationDate, $lastEditDate, $content, $idPost, $idUser);
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>INSERT12</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>User Joined Project.</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Dozens per week</td>
    </tr>
  </tbody>
</table>

```SQL
INSERT INTO Joined(idUser, idProject, joinedDate, role)
VALUES ($idUser, $idProject, $joinedDate, $role);
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>UPDATE01</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>Update User's information.</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Once per week</td>
    </tr>
  </tbody>
</table>

```SQL
UPDATE UserTable
  SET password = $password, email = $email, premium  = $premium, banned = $banned, name = $name, gender = $gender, address = $address, institution = $institution, description = $description, birthDate = $birthDate
  WHERE idUser = $idUser;
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>UPDATE02</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>Update Project's information.</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Once per week</td>
    </tr>
  </tbody>
</table>

```SQL
UPDATE Project
  SET name = $name, description = $description, private = $private
  WHERE idProject = $idProject;
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>UPDATE03</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>Update Forum Post.</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Once per day</td>
    </tr>
  </tbody>
</table>

```SQL
UPDATE ForumPost
  SET lastEditDate = $lastEditDate, title = $title, content = $content
  WHERE idPost = $idPost;
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>UPDATE04</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>Update Task Comment.</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Once per day</td>
    </tr>
  </tbody>
</table>

```SQL
UPDATE Comment
  SET lastEditDate = $lastEditDate, content = $content
  WHERE idComment = $idComment;
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>UPDATE05</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>Update Task's information.</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Once per day</td>
    </tr>
  </tbody>
</table>

```SQL
UPDATE Task
  SET lastEditDate = $lastEditDate, title = $title, description = $description, deadline = $deadline, completed = $completed, completionDate = $completionDate
  WHERE idTask = $idTask;
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>UPDATE06</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>Update CloseRequest's information.</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Once per day</td>
    </tr>
  </tbody>
</table>

```SQL
UPDATE CloseRequest
  SET title = $title, description = $description, approved = $approved
  WHERE idRequest = $idRequest;
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>UPDATE07</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>Update Admin's information.</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Once per day</td>
    </tr>
  </tbody>
</table>

```SQL
UPDATE Admin
  SET password = $password, email = $email
  WHERE idAdmin = $idAdmin;
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>DELETE01</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>Delete Task.</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Once per day</td>
    </tr>
  </tbody>
</table>

```SQL
DELETE FROM Task
WHERE idTask = $idTask;
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>DELETE02</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>Delete Task's Comment</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Once per day</td>
    </tr>
  </tbody>
</table>

```SQL
DELETE FROM Comment
WHERE idComment = $idComment;
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>DELETE03</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>Delete Project</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Once per day</td>
    </tr>
  </tbody>
</table>

```SQL
DELETE FROM Project
WHERE idProject = $idProject;
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>DELETE04</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>Delete Forum Post</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Once per day</td>
    </tr>
  </tbody>
</table>

```SQL
DELETE FROM ForumPost
WHERE idPost = $idPost;
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>DELETE05</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>Delete ForumPost's Reply</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Once per day</td>
    </tr>
  </tbody>
</table>

```SQL
DELETE FROM Reply
WHERE idReply = $idReply;
```

<table>
  <tbody>
    <tr>
      <td><b>Query reference</b></td>
      <td>DELETE06</td>
    </tr>
    <tr>
      <td><b>Query description</b></td>
      <td>Delete User</td>
    </tr>
    <tr>
      <td><b>Query frequency</b></td>
      <td>Once per day</td>
    </tr>
  </tbody>
</table>

```SQL
DELETE FROM User
WHERE idUser = $idUser;
```
## 2. Proposed Indices
### 2.1. Performance Indices

<table>
  <tbody>
    <tr>
      <td><b>Index reference</b></td>
      <td>DX01</td>
    </tr>
    <tr>
      <td><b>Related queries</b></td>
      <td>SELECT02</td>
    </tr>
    <tr>
      <td><b>Index relation</b></td>
      <td>UserTable</td>
    </tr>
    <tr>
      <td><b>Index attribute</b></td>
      <td>email</td>
    </tr>
    <tr>
      <td><b>Index type</b></td>
      <td>Hash</td>
    </tr>
    <tr>
      <td><b>Cardinality</b></td>
      <td>High</td>
    </tr>
    <tr>
      <td><b>Clustering</b></td>
      <td>No</td>
    </tr>
    <tr>
      <td><b>Justification</b></td>
      <td> SELECT02 needs to be fast because it is executed many times;
	      it doesn't require range query support;
	      cardinality is high because 'email' is an unique key;
	      not a good candidate for clustering.</td>
    </tr>
  </tbody>
</table>

```SQL
CREATE INDEX emailUser ON UserTable USING hash (email);
```

<table>
  <tbody>
    <tr>
      <td><b>Index reference</b></td>
      <td>DX02</td>
    </tr>
    <tr>
      <td><b>Related queries</b></td>
      <td>SELECT03</td>
    </tr>
    <tr>
      <td><b>Index relation</b></td>
      <td>Task</td>
    </tr>
    <tr>
      <td><b>Index attribute</b></td>
      <td>idUser</td>
    </tr>
    <tr>
      <td><b>Index type</b></td>
      <td>Hash</td>
    </tr>
    <tr>
      <td><b>Cardinality</b></td>
      <td>Medium</td>
    </tr>
    <tr>
      <td><b>Clustering</b></td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><b>Justification</b></td>
      <td> Table is very large; SELECT03, used to search an users tasks, has to be fast because it's executed many times;
	      doesn't need range query support;
	      cardinality is medium so it's a good candidate for clustering.</td>
    </tr>
  </tbody>
</table>

```SQL
CREATE INDEX taskUser ON Task USING hash(idUser);
```

<table>
  <tbody>
    <tr>
      <td><b>Index reference</b></td>
      <td>DX03</td>
    </tr>
    <tr>
      <td><b>Related queries</b></td>
      <td>SELECT04</td>
    </tr>
    <tr>
      <td><b>Index relation</b></td>
      <td>Joined</td>
    </tr>
    <tr>
      <td><b>Index attribute</b></td>
      <td>idUser</td>
    </tr>
    <tr>
      <td><b>Index type</b></td>
      <td>Hash</td>
    </tr>
    <tr>
      <td><b>Cardinality</b></td>
      <td>Medium</td>
    </tr>
    <tr>
      <td><b>Clustering</b></td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><b>Justification</b></td>
      <td> SELECT03, used to search an users tasks, has to be fast because it's executed several times;
	      doesn't need range query support;
	      cardinality is medium therefor it's a good candidate for clustering.</td>
    </tr>
  </tbody>
</table>

```SQL
CREATE INDEX projectUser ON Joined USING hash(idUser);
```

<table>
  <tbody>
    <tr>
      <td><b>Index reference</b></td>
      <td>DX04</td>
    </tr>
    <tr>
      <td><b>Related queries</b></td>
      <td>SELECT03</td>
    </tr>
    <tr>
      <td><b>Index relation</b></td>
      <td>Task</td>
    </tr>
    <tr>
      <td><b>Index attribute</b></td>
      <td>deadline</td>
    </tr>
    <tr>
      <td><b>Index type</b></td>
      <td>B-Tree</td>
    </tr>
    <tr>
      <td><b>Cardinality</b></td>
      <td>Medium</td>
    </tr>
    <tr>
      <td><b>Clustering</b></td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><b>Justification</b></td>
      <td> To allow searching tasks by deadline faster;
	      It's clustered to allow for quick range queries;
	      cardinality is medium.</td>
    </tr>
  </tbody>
</table>

```SQL
CREATE INDEX deadlineTask ON Task USING btree (DEADLINE);  
```
### 2.2. Full-text Search Indices

<table>
  <tbody>
    <tr>
      <td><b>Index reference</b></td>
      <td>IDX01</td>
    </tr>
    <tr>
      <td><b>Related queries</b></td>
      <td>tbd</td>
    </tr>
    <tr>
      <td><b>Index relation</b></td>
      <td>UserTable</td>
    </tr>
    <tr>
      <td><b>Index attribute</b></td>
      <td>username</td>
    </tr>
    <tr>
      <td><b>Index type</b></td>
      <td>GIN</td>
    </tr>
    <tr>
      <td><b>Clustering</b></td>
      <td>No</td>
    </tr>
    <tr>
      <td><b>Justification</b></td>
      <td>To improve performance of full text search while searching for usernames; GIN because usernames never changes.</td>
    </tr>
  </tbody>
</table>

```SQL
CREATE INDEX search_username ON UserTable USING GIN (to_tsvector('english', username));
```

<table>
  <tbody>
    <tr>
      <td><b>Index reference</b></td>
      <td>IDX02</td>
    </tr>
    <tr>
      <td><b>Related queries</b></td>
      <td>tbd</td>
    </tr>
    <tr>
      <td><b>Index relation</b></td>
      <td>UserTable</td>
    </tr>
    <tr>
      <td><b>Index attribute</b></td>
      <td>name</td>
    </tr>
    <tr>
      <td><b>Index type</b></td>
      <td>GIN</td>
    </tr>
    <tr>
      <td><b>Clustering</b></td>
      <td>No</td>
    </tr>
    <tr>
      <td><b>Justification</b></td>
      <td>To improve performance of full text search while searching for user full names; GIN because updates in user full names are rare.</td>
    </tr>
  </tbody>
</table>

```SQL
CREATE INDEX search_user_name ON UserTable USING GIN (to_tsvector('english', name));
```

<table>
  <tbody>
    <tr>
      <td><b>Index reference</b></td>
      <td>IDX03</td>
    </tr>
    <tr>
      <td><b>Related queries</b></td>
      <td>tbd</td>
    </tr>
    <tr>
      <td><b>Index relation</b></td>
      <td>Project</td>
    </tr>
    <tr>
      <td><b>Index attribute</b></td>
      <td>name</td>
    </tr>
    <tr>
      <td><b>Index type</b></td>
      <td>GIN</td>
    </tr>
    <tr>
      <td><b>Clustering</b></td>
      <td>No</td>
    </tr>
    <tr>
      <td><b>Justification</b></td>
      <td>To improve performance of full text search while searching for project names; GIN because updates in the project name are rare.</td>
    </tr>
  </tbody>
</table>

```SQL
CREATE INDEX search_project_name ON Project USING GIN (to_tsvector('english', name));
```

<table>
  <tbody>
    <tr>
      <td><b>Index reference</b></td>
      <td>IDX04</td>
    </tr>
    <tr>
      <td><b>Related queries</b></td>
      <td>tbd</td>
    </tr>
    <tr>
      <td><b>Index relation</b></td>
      <td>Project</td>
    </tr>
    <tr>
      <td><b>Index attribute</b></td>
      <td>description</td>
    </tr>
    <tr>
      <td><b>Index type</b></td>
      <td>GisT</td>
    </tr>
    <tr>
      <td><b>Clustering</b></td>
      <td>No</td>
    </tr>
    <tr>
      <td><b>Justification</b></td>
      <td>To improve performance of full text search while searching for project names; GisT because the project description is dynamic.</td>
    </tr>
  </tbody>
</table>

```SQL
CREATE INDEX search_project_description ON Project USING GIST (to_tsvector('english', description));
```

<table>
  <tbody>
    <tr>
      <td><b>Index reference</b></td>
      <td>IDX05</td>
    </tr>
    <tr>
      <td><b>Related queries</b></td>
      <td>tbd</td>
    </tr>
    <tr>
      <td><b>Index relation</b></td>
      <td>Task</td>
    </tr>
    <tr>
      <td><b>Index attribute</b></td>
      <td>name</td>
    </tr>
    <tr>
      <td><b>Index type</b></td>
      <td>GIN</td>
    </tr>
    <tr>
      <td><b>Clustering</b></td>
      <td>No</td>
    </tr>
    <tr>
      <td><b>Justification</b></td>
      <td>To improve performance of full text search while searching for tasks; GIN because the updates in the task name are rare.</td>
    </tr>
  </tbody>
</table>

```SQL
CREATE INDEX search_task_name ON Task USING GIN (to_tsvector('english', title));
```

<table>
  <tbody>
    <tr>
      <td><b>Index reference</b></td>
      <td>IDX06</td>
    </tr>
    <tr>
      <td><b>Related queries</b></td>
      <td>tbd</td>
    </tr>
    <tr>
      <td><b>Index relation</b></td>
      <td>Task</td>
    </tr>
    <tr>
      <td><b>Index attribute</b></td>
      <td>description</td>
    </tr>
    <tr>
      <td><b>Index type</b></td>
      <td>GisT</td>
    </tr>
    <tr>
      <td><b>Clustering</b></td>
      <td>No</td>
    </tr>
    <tr>
      <td><b>Justification</b></td>
      <td>To improve performance of full text search while searching for tasks; GisT because the task description is dynamic.</td>
    </tr>
  </tbody>
</table>

```SQL
CREATE INDEX search_task_description ON Task USING GIST (to_tsvector('english', description));
```

## 3. Triggers

<table>
  <tbody>
    <tr>
      <td><b>Trigger reference<b></td>
      <td>TRIGGER01</td>
    </tr>
    <tr>
      <td><b>Trigger description</b></td>
      <td>Only a User who Joined a Project can create Posts in it's Forum</td>
    </tr>
  </tbody>
</table>

```SQL
CREATE OR REPLACE FUNCTION plenum.insertPost() RETURNS TRIGGER AS
$BODY$
  BEGIN
    IF NOT EXISTS (
      SELECT * FROM plenum.Joined
      WHERE new.idUser = Joined.idUser AND new.idProject = Joined.idProject)
    THEN
      RAISE EXCEPTION 'Only a user who joined a project can post in its forum.';
    END IF;
    RETURN NEW;
  END
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER onCreatePost BEFORE INSERT ON plenum.ForumPost
FOR EACH ROW
EXECUTE PROCEDURE plenum.insertPost();
```

<table>
  <tbody>
    <tr>
      <td><b>Trigger reference<b></td>
      <td>TRIGGER02</td>
    </tr>
    <tr>
      <td><b>Trigger description</b></td>
      <td>Only a User who Joined a Project can Reply in it's Forum</td>
    </tr>
  </tbody>
</table>

```SQL
CREATE OR REPLACE FUNCTION plenum.insertReply() RETURNS TRIGGER AS
$BODY$
  BEGIN
    IF NOT EXISTS (
      SELECT * FROM plenum.Joined, plenum.ForumPost
      WHERE new.idPost = ForumPost.idPost AND ForumPost.idProject = Joined.idProject AND new.idUser = Joined.idUser)
    THEN
      RAISE EXCEPTION 'Only a user who joined a project can reply to posts in its forum.';
    END IF;
    RETURN NEW;
  END
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER onCreateReply BEFORE INSERT ON plenum.Reply
FOR EACH ROW
EXECUTE PROCEDURE plenum.insertReply();
```

<table>
  <tbody>
    <tr>
      <td><b>Trigger reference<b></td>
      <td>TRIGGER03</td>
    </tr>
    <tr>
      <td><b>Trigger description</b></td>
      <td>Only a user who has Joined a Project can create Comments for a Project Task</td>
    </tr>
  </tbody>
</table>

```SQL
CREATE OR REPLACE FUNCTION plenum.insertComent() RETURNS TRIGGER AS
$BODY$
  BEGIN
    IF NOT EXISTS (
      SELECT * FROM plenum.Joined, plenum.Task
      WHERE new.idTask = Task.idTask AND Task.idProject = Joined.idProject AND new.idUser = Joined.idUser)
    THEN
      RAISE EXCEPTION 'Only a user who joined a project can create comments for a Project Task.';
    END IF;
    RETURN NEW;
  END;
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER onCreateComment BEFORE INSERT ON plenum.Comment
FOR EACH ROW
EXECUTE PROCEDURE plenum.insertComent();
```

<table>
  <tbody>
    <tr>
      <td><b>Trigger reference<b></td>
      <td>TRIGGER04</td>
    </tr>
    <tr>
      <td><b>Trigger description</b></td>
      <td>Only a User who was Assigned to a Task can create a Close Request for it.</td>
    </tr>
  </tbody>
</table>

```SQL
CREATE OR REPLACE FUNCTION plenum.insertCloseRequest() RETURNS TRIGGER AS
$BODY$
  BEGIN
    IF NOT EXISTS (
      SELECT * FROM plenum.Assigned
      WHERE new.idTask = Assigned.idTask AND new.idUser = Assigned.idUser)
    THEN
      RAISE EXCEPTION 'Only a user who joined a project can create comments for a Project Task.';
    END IF;
    RETURN NEW;
  END;
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER onCreateCloseRequest BEFORE INSERT ON plenum.CloseRequest
FOR EACH ROW
EXECUTE PROCEDURE plenum.insertCloseRequest();
```

<table>
  <tbody>
    <tr>
      <td><b>Trigger reference<b></td>
      <td>TRIGGER05</td>
    </tr>
    <tr>
      <td><b>Trigger description</b></td>
      <td>Only a User who Joined a Project can create Tasks for It.</td>
    </tr>
  </tbody>
</table>

```SQL
CREATE OR REPLACE FUNCTION plenum.insertTask() RETURNS TRIGGER AS
$BODY$
  BEGIN
    IF NOT EXISTS (
      SELECT * FROM plenum.Joined
      WHERE new.idUser = Joined.idUser AND new.idProject = Joined.idProject)
    THEN
      RAISE EXCEPTION 'Only a user who joined a project can create tasks for it.';
    END IF;
    RETURN NEW;
  END;
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER onCreateTask BEFORE INSERT ON plenum.Task
FOR EACH ROW
EXECUTE PROCEDURE plenum.insertTask();
```

<table>
  <tbody>
    <tr>
      <td><b>Trigger reference<b></td>
      <td>TRIGGER06</td>
    </tr>
    <tr>
      <td><b>Trigger description</b></td>
      <td>Only a User who Joined a Project can be assigned to it's Tasks.</td>
    </tr>
  </tbody>
</table>

```SQL
CREATE OR REPLACE FUNCTION plenum.insertAssigned() RETURNS TRIGGER AS
$BODY$
  BEGIN
    IF NOT EXISTS (
      SELECT * FROM plenum.Joined, plenum.Task
      WHERE new.idUser = Joined.idUser AND new.idTask = Task.idTask AND Task.idProject = Joined.idProject)
    THEN
      RAISE EXCEPTION 'Only a user who joined a project can be assigned to its tasks.';
    END IF;
    RETURN NEW;
  END;
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER onCreateAssigned BEFORE INSERT ON plenum.Assigned
FOR EACH ROW
EXECUTE PROCEDURE plenum.insertAssigned();
```

<table>
  <tbody>
    <tr>
      <td><b>Trigger reference<b></td>
      <td>TRIGGER07</td>
    </tr>
    <tr>
      <td><b>Trigger description</b></td>
      <td>A Project can only be private while the Owner is a premium User.</td>
    </tr>
  </tbody>
</table>

```SQL
CREATE OR REPLACE FUNCTION plenum.canProjectBePrivate() RETURNS TRIGGER AS
$BODY$
  BEGIN
  IF NOT EXISTS (
    SELECT * FROM plenum.Joined, plenum.UserTable
    WHERE new.idProject = Joined.idProject AND Joined.role = 'Owner' AND Joined.idUser = UserTable.idUser AND UserTable.premium = true)
  THEN
    RAISE EXCEPTION 'A Project can only be private while the Owner is a Premium User.';
  END IF;
  RETURN NEW;
  END;
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER onCreateProject BEFORE UPDATE ON plenum.Project
FOR EACH ROW
WHEN (NEW.private IS TRUE)
EXECUTE PROCEDURE plenum.canProjectBePrivate();
```

<table>
  <tbody>
    <tr>
      <td><b>Trigger reference<b></td>
      <td>TRIGGER08</td>
    </tr>
    <tr>
      <td><b>Trigger description</b></td>
      <td>A Project can only be private while the Owner is a premium User.</td>
    </tr>
  </tbody>
</table>

```SQL
CREATE OR REPLACE FUNCTION plenum.updateUserTable() RETURNS TRIGGER AS
$BODY$
  BEGIN
  IF EXISTS (
    SELECT * FROM plenum.Joined, plenum.Project
    WHERE new.idUser = Joined.idUser AND Joined.role = 'Owner' AND Project.idProject = Joined.idProject AND Project.private = true)
  THEN
    RAISE EXCEPTION 'A Project can only be private while the Owner is a Premium User.';
  END IF;
  RETURN NEW;
  END;
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER onUpdateUser BEFORE UPDATE ON plenum.UserTable
FOR EACH ROW
WHEN (new.premium = false)
EXECUTE PROCEDURE plenum.updateUserTable();
```

<table>
  <tbody>
    <tr>
      <td><b>Trigger reference<b></td>
      <td>TRIGGER09</td>
    </tr>
    <tr>
      <td><b>Trigger description</b></td>
      <td>A Project can only have one owner.</td>
    </tr>
  </tbody>
</table>

```SQL
CREATE OR REPLACE FUNCTION plenum.onlyOneOwner() RETURNS TRIGGER AS
$BODY$
  BEGIN
  IF EXISTS (
    SELECT * FROM plenum.Joined
    WHERE new.idProject = Joined.idProject AND Joined.role = 'Owner')
  THEN
    RAISE EXCEPTION 'A Project can only have one owner.';
  END IF;
  RETURN NEW;
  END;
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER onCreateJoined BEFORE INSERT ON plenum.Joined
FOR EACH ROW
WHEN (new.role = 'Owner')
EXECUTE PROCEDURE plenum.onlyOneOwner();
```

## 4. Complete SQL Code

```SQL
DROP SCHEMA IF EXISTS plenum CASCADE;
CREATE SCHEMA plenum;
SET search_path TO plenum,public;

/* every table should already be dropped, we are just making sure :) */
/* admin */
DROP TABLE IF EXISTS Admin;

/* UserTable */
DROP TABLE IF EXISTS UserTable;

/* premium signature*/
DROP TABLE IF EXISTS PremiumSignature;

/* country */
DROP TABLE IF EXISTS Country;

/* joined */
DROP TABLE IF EXISTS Joined;

/* project */
DROP TABLE IF EXISTS Project;

/* forum post*/
DROP TABLE IF EXISTS ForumPost;

/* reply */
DROP TABLE IF EXISTS Reply;

/* banned record */
DROP TABLE IF EXISTS BannedRecord;

/* task */
DROP TABLE IF EXISTS Task;

/* tag */
DROP TABLE IF EXISTS Tag;

/* tagged */
DROP TABLE IF Exists Tagged;

/* comment */
DROP TABLE IF EXISTS Comment;

/* completed task*/
DROP TABLE IF EXISTS Completed_Task;

/* close request */
DROP TABLE IF EXISTS CloseRequest;

/* edit task info */
DROP TABLE IF EXISTS EditTaskInfo;

/* assigned */
DROP TABLE IF EXISTS Assigned;

/* dropping old data types*/
DROP TYPE IF EXISTS gender;
DROP TYPE IF EXISTS role;

/* creating data types */
CREATE TYPE gender AS ENUM('Male', 'Female');
CREATE TYPE role AS ENUM('Owner' , 'Coordinator', 'Member');

/* country */
CREATE TABLE Country(
	idCountry serial PRIMARY KEY,
	name text UNIQUE NOT NULL
);

/* UserTable */
CREATE TABLE UserTable(
	idUser serial PRIMARY KEY,
	username text UNIQUE NOT NULL,
	password text NOT NULL,
	email text UNIQUE NOT NULL,
	premium boolean NOT NULL,
	banned boolean NOT NULL,
	name text NOT NULL,
	gender gender,
	address text,
	institution text,
	description text,
	birthDate date CONSTRAINT valid_date CHECK (birthdate < current_date),
	idCountry integer,
	FOREIGN KEY(idCountry) REFERENCES Country(idCountry)
);

/* premium signature */
CREATE TABLE PremiumSignature(
	idPremium serial PRIMARY KEY,
	startDate timestamp NOT NULL,
	duration  interval NOT NULL CHECK (duration > interval '0'),
	idUser integer NOT NULL,
	FOREIGN KEY(idUser) REFERENCES UserTable(idUser)
);

/* project */
CREATE TABLE Project(
	idProject serial PRIMARY KEY,
	creationDate timestamp NOT NULL,
	name text NOT NULL,
	description text NOT NULL,
	private boolean NOT NULL
);

/* joined */
CREATE TABLE Joined(
	idUser integer,
	idProject integer,
	joinedDate timestamp NOT NULL,
	role Role NOT NULL,
	PRIMARY KEY(idUser, idProject),
	FOREIGN KEY(idUser) REFERENCES UserTable(idUser),
	FOREIGN KEY(idProject) REFERENCES Project(idProject)
);

/* forum post */
CREATE TABLE ForumPost(
	idPost serial PRIMARY KEY,
	creationDate timestamp NOT NULL,
	lastEditDate timestamp,
	title text NOT NULL,
	content text NOT NULL,
	idProject integer NOT NULL,
	idUser integer NOT NULL,
	FOREIGN KEY(idProject) REFERENCES Project(idProject),
	FOREIGN KEY(idUser) REFERENCES UserTable(idUser)
);

/* reply */
CREATE TABLE Reply(
	idReply serial PRIMARY KEY,
	creationDate timestamp NOT NULL,
	lastEditDate timestamp,
	content text NOT NULL,
	idPost integer NOT NULL,
	idUser integer NOT NULL,
	FOREIGN KEY(idPost) REFERENCES ForumPost(idPost),
	FOREIGN KEY(idUser) REFERENCES UserTable(idUser)
);

/* task */
CREATE TABLE Task(
	idTask serial PRIMARY KEY,
	creationDate timestamp NOT NULL,
	lastEditDate timestamp,
	title text NOT NULL,
	description text,
	deadline timestamp,
	completed boolean NOT NULL,
	completetionDate timestamp,
	idUser integer NOT NULL,
	idProject integer NOT NULL,
	CONSTRAINT completionDate_valid CHECK (completetionDate > creationDate),
	FOREIGN KEY(idUser) REFERENCES UserTable(idUser),
	FOREIGN KEY(idProject) REFERENCES Project(idProject)
);

/* assigned */
CREATE TABLE Assigned(
	idUser integer,
	idTask integer,
	PRIMARY KEY(idUser, idTask),
	FOREIGN KEY(idUser) REFERENCES UserTable(idUser),
	FOREIGN KEY(idTask) REFERENCES Task(idTask)
);

/* edit task info */
CREATE TABLE EditTaskInfo(
	idUser integer,
	idTask integer,
	editDate timestamp NOT NULL,
	PRIMARY KEY(idUser, idTask),
	FOREIGN KEY(idUser) REFERENCES UserTable(idUser),
	FOREIGN KEY(idTask) REFERENCES Task(idTask)
);

/* comment */
CREATE TABLE Comment(
	idComment serial PRIMARY KEY,
	creationDate timestamp NOT NULL,
	lastEditDate timestamp,
	content text NOT NULL,
	idTask integer NOT NULL,
	idUser integer NOT NULL,
	idParent integer,
	FOREIGN KEY(idTask) REFERENCES Task(idTask),
	FOREIGN KEY(idUser) REFERENCES UserTable(idUser),
	FOREIGN KEY(idParent) REFERENCES Comment(idComment)
);

/* tag */
CREATE TABLE Tag(
	idTag serial PRIMARY KEY,
	name text UNIQUE NOT NULL
);

/* tagged */
CREATE TABLE Tagged(
	idTask integer,
	idTag integer,
	PRIMARY KEY(idTask, idTag),
	FOREIGN KEY(idTask) REFERENCES Task(idTask),
	FOREIGN KEY(idTag) REFERENCES Tag(idTag)
);

/* close request */
CREATE TABLE CloseRequest(
	idRequest serial PRIMARY KEY,
	creationDate timestamp NOT NULL,
	title text NOT NULL,
	description text,
	approved boolean NOT NULL,
	idUser integer NOT NULL,
	idTask integer NOT NULL,
	FOREIGN KEY(idUser) REFERENCES UserTable(idUser),
	FOREIGN KEY(idTask) REFERENCES Task(idTask)
);

/* Admin */
CREATE TABLE Admin(
	idAdmin serial PRIMARY KEY,
	username text UNIQUE NOT NULL,
	email text UNIQUE NOT NULL,
	password text NOT NULL
);

/* Banned record */
CREATE TABLE BannedRecord(
	idBan serial PRIMARY KEY,
	startDate timestamp NOT NULL,
	duration interval NOT NULL,
	motive text,
	idUser integer NOT NULL,
	idAdmin integer NOT NULL,
	FOREIGN KEY(idUser) REFERENCES UserTable(idUser),
	FOREIGN KEY(idAdmin) REFERENCES Admin(idAdmin),
	CONSTRAINT min_time check (duration > interval '0 second')
);
```
[Link to the SQL script included in the repository.](https://github.com/mpcmarques/lbaw1743/blob/master/database/plenum.sql)

```SQL
--Countries
insert into plenum.country (name) values ('Andorra');
insert into plenum.country (name) values ('United Arab Emirates');
insert into plenum.country (name) values ('Afghanistan');
insert into plenum.country (name) values ('Antigua and Barbuda');
insert into plenum.country (name) values ('Anguilla');
insert into plenum.country (name) values ('Albania');
insert into plenum.country (name) values ('Armenia');
insert into plenum.country (name) values ('Angola');
insert into plenum.country (name) values ('Antarctica');
insert into plenum.country (name) values ('Argentina');
insert into plenum.country (name) values ('American Samoa');
insert into plenum.country (name) values ('Austria');
insert into plenum.country (name) values ('Australia');
insert into plenum.country (name) values ('Aruba');
insert into plenum.country (name) values ('Åland Islands');
insert into plenum.country (name) values ('Azerbaijan');
insert into plenum.country (name) values ('Bosnia and Herzegovina');
insert into plenum.country (name) values ('Barbados');
insert into plenum.country (name) values ('Bangladesh');
insert into plenum.country (name) values ('Belgium');
insert into plenum.country (name) values ('Burkina Faso');
insert into plenum.country (name) values ('Bulgaria');
insert into plenum.country (name) values ('Bahrain');
insert into plenum.country (name) values ('Burundi');
insert into plenum.country (name) values ('Benin');
insert into plenum.country (name) values ('Saint Barthélemy');
insert into plenum.country (name) values ('Bermuda');
insert into plenum.country (name) values ('Brunei Darussalam');
insert into plenum.country (name) values ('Bolivia');
insert into plenum.country (name) values ('Caribbean Netherlands ');
insert into plenum.country (name) values ('Brazil');
insert into plenum.country (name) values ('Bahamas');
insert into plenum.country (name) values ('Bhutan');
insert into plenum.country (name) values ('Bouvet Island');
insert into plenum.country (name) values ('Botswana');
insert into plenum.country (name) values ('Belarus');
insert into plenum.country (name) values ('Belize');
insert into plenum.country (name) values ('Canada');
insert into plenum.country (name) values ('Cocos (Keeling) Islands');
insert into plenum.country (name) values ('Democratic Republic of Congo');
insert into plenum.country (name) values ('Central African Republic');
insert into plenum.country (name) values ('Congo');
insert into plenum.country (name) values ('Switzerland');
insert into plenum.country (name) values ('Côte d''Ivoire');
insert into plenum.country (name) values ('Cook Islands');
insert into plenum.country (name) values ('Chile');
insert into plenum.country (name) values ('Cameroon');
insert into plenum.country (name) values ('China');
insert into plenum.country (name) values ('Colombia');
insert into plenum.country (name) values ('Costa Rica');
insert into plenum.country (name) values ('Cuba');
insert into plenum.country (name) values ('Cape Verde');
insert into plenum.country (name) values ('Curaçao');
insert into plenum.country (name) values ('Christmas Island');
insert into plenum.country (name) values ('Cyprus');
insert into plenum.country (name) values ('Czech Republic');
insert into plenum.country (name) values ('Germany');
insert into plenum.country (name) values ('Djibouti');
insert into plenum.country (name) values ('Denmark');
insert into plenum.country (name) values ('Dominica');
insert into plenum.country (name) values ('Dominican Republic');
insert into plenum.country (name) values ('Algeria');
insert into plenum.country (name) values ('Ecuador');
insert into plenum.country (name) values ('Estonia');
insert into plenum.country (name) values ('Egypt');
insert into plenum.country (name) values ('Western Sahara');
insert into plenum.country (name) values ('Eritrea');
insert into plenum.country (name) values ('Spain');
insert into plenum.country (name) values ('Ethiopia');
insert into plenum.country (name) values ('Finland');
insert into plenum.country (name) values ('Fiji');
insert into plenum.country (name) values ('Falkland Islands');
insert into plenum.country (name) values (' Federated States of Micronesia');
insert into plenum.country (name) values ('Faroe Islands');
insert into plenum.country (name) values ('France');
insert into plenum.country (name) values ('Gabon');
insert into plenum.country (name) values ('United Kingdom');
insert into plenum.country (name) values ('Grenada');
insert into plenum.country (name) values ('Georgia');
insert into plenum.country (name) values ('French Guiana');
insert into plenum.country (name) values ('Guernsey');
insert into plenum.country (name) values ('Ghana');
insert into plenum.country (name) values ('Gibraltar');
insert into plenum.country (name) values ('Greenland');
insert into plenum.country (name) values ('Gambia');
insert into plenum.country (name) values ('Guinea');
insert into plenum.country (name) values ('Guadeloupe');
insert into plenum.country (name) values ('Equatorial Guinea');
insert into plenum.country (name) values ('Greece');
insert into plenum.country (name) values ('South Georgia and the South Sandwich Islands');
insert into plenum.country (name) values ('Guatemala');
insert into plenum.country (name) values ('Guam');
insert into plenum.country (name) values ('Guinea-Bissau');
insert into plenum.country (name) values ('Guyana');
insert into plenum.country (name) values ('Hong Kong');
insert into plenum.country (name) values ('Heard and McDonald Islands');
insert into plenum.country (name) values ('Honduras');
insert into plenum.country (name) values ('Croatia');
insert into plenum.country (name) values ('Haiti');
insert into plenum.country (name) values ('Hungary');
insert into plenum.country (name) values ('Indonesia');
insert into plenum.country (name) values ('Ireland');
insert into plenum.country (name) values ('Israel');
insert into plenum.country (name) values ('Isle of Man');
insert into plenum.country (name) values ('India');
insert into plenum.country (name) values ('British Indian Ocean Territory');
insert into plenum.country (name) values ('Iraq');
insert into plenum.country (name) values ('Iran');
insert into plenum.country (name) values ('Iceland');
insert into plenum.country (name) values ('Italy');
insert into plenum.country (name) values ('Jersey');
insert into plenum.country (name) values ('Jamaica');
insert into plenum.country (name) values ('Jordan');
insert into plenum.country (name) values ('Japan');
insert into plenum.country (name) values ('Kenya');
insert into plenum.country (name) values ('Kyrgyzstan');
insert into plenum.country (name) values ('Cambodia');
insert into plenum.country (name) values ('Kiribati');
insert into plenum.country (name) values ('Comoros');
insert into plenum.country (name) values ('Saint Kitts and Nevis');
insert into plenum.country (name) values ('North Korea');
insert into plenum.country (name) values ('South Korea');
insert into plenum.country (name) values ('Kuwait');
insert into plenum.country (name) values ('Cayman Islands');
insert into plenum.country (name) values ('Kazakhstan');
insert into plenum.country (name) values ('Lao People''s Democratic Republic');
insert into plenum.country (name) values ('Lebanon');
insert into plenum.country (name) values ('Saint Lucia');
insert into plenum.country (name) values ('Liechtenstein');
insert into plenum.country (name) values ('Sri Lanka');
insert into plenum.country (name) values ('Liberia');
insert into plenum.country (name) values ('Lesotho');
insert into plenum.country (name) values ('Lithuania');
insert into plenum.country (name) values ('Luxembourg');
insert into plenum.country (name) values ('Latvia');
insert into plenum.country (name) values ('Libya');
insert into plenum.country (name) values ('Morocco');
insert into plenum.country (name) values ('Monaco');
insert into plenum.country (name) values ('Moldova');
insert into plenum.country (name) values ('Montenegro');
insert into plenum.country (name) values ('Saint-Martin (France)');
insert into plenum.country (name) values ('Madagascar');
insert into plenum.country (name) values ('Marshall Islands');
insert into plenum.country (name) values ('Macedonia');
insert into plenum.country (name) values ('Mali');
insert into plenum.country (name) values ('Myanmar');
insert into plenum.country (name) values ('Mongolia');
insert into plenum.country (name) values ('Macau');
insert into plenum.country (name) values ('Northern Mariana Islands');
insert into plenum.country (name) values ('Martinique');
insert into plenum.country (name) values ('Mauritania');
insert into plenum.country (name) values ('Montserrat');
insert into plenum.country (name) values ('Malta');
insert into plenum.country (name) values ('Mauritius');
insert into plenum.country (name) values ('Maldives');
insert into plenum.country (name) values ('Malawi');
insert into plenum.country (name) values ('Mexico');
insert into plenum.country (name) values ('Malaysia');
insert into plenum.country (name) values ('Mozambique');
insert into plenum.country (name) values ('Namibia');
insert into plenum.country (name) values ('New Caledonia');
insert into plenum.country (name) values ('Niger');
insert into plenum.country (name) values ('Norfolk Island');
insert into plenum.country (name) values ('Nigeria');
insert into plenum.country (name) values ('Nicaragua');
insert into plenum.country (name) values ('The Netherlands');
insert into plenum.country (name) values ('Norway');
insert into plenum.country (name) values ('Nepal');
insert into plenum.country (name) values ('Nauru');
insert into plenum.country (name) values ('Niue');
insert into plenum.country (name) values ('New Zealand');
insert into plenum.country (name) values ('Oman');
insert into plenum.country (name) values ('Panama');
insert into plenum.country (name) values ('Peru');
insert into plenum.country (name) values ('French Polynesia');
insert into plenum.country (name) values ('Papua New Guinea');
insert into plenum.country (name) values ('Philippines');
insert into plenum.country (name) values ('Pakistan');
insert into plenum.country (name) values ('Poland');
insert into plenum.country (name) values ('St. Pierre and Miquelon');
insert into plenum.country (name) values ('Pitcairn');
insert into plenum.country (name) values ('Puerto Rico');
insert into plenum.country (name) values ('State of Palestine');
insert into plenum.country (name) values ('Portugal');
insert into plenum.country (name) values ('Palau');
insert into plenum.country (name) values ('Paraguay');
insert into plenum.country (name) values ('Qatar');
insert into plenum.country (name) values ('Réunion');
insert into plenum.country (name) values ('Romania');
insert into plenum.country (name) values ('Serbia');
insert into plenum.country (name) values ('Russian Federation');
insert into plenum.country (name) values ('Rwanda');
insert into plenum.country (name) values ('Saudi Arabia');
insert into plenum.country (name) values ('Solomon Islands');
insert into plenum.country (name) values ('Seychelles');
insert into plenum.country (name) values ('Sudan');
insert into plenum.country (name) values ('Sweden');
insert into plenum.country (name) values ('Singapore');
insert into plenum.country (name) values ('Saint Helena');
insert into plenum.country (name) values ('Slovenia');
insert into plenum.country (name) values ('Svalbard and Jan Mayen Islands');
insert into plenum.country (name) values ('Slovakia');
insert into plenum.country (name) values ('Sierra Leone');
insert into plenum.country (name) values ('San Marino');
insert into plenum.country (name) values ('Senegal');
insert into plenum.country (name) values ('Somalia');
insert into plenum.country (name) values ('Suriname');
insert into plenum.country (name) values ('South Sudan');
insert into plenum.country (name) values ('Sao Tome and Principe');
insert into plenum.country (name) values ('El Salvador');
insert into plenum.country (name) values ('Sint Maarten');
insert into plenum.country (name) values ('Syria');
insert into plenum.country (name) values ('Swaziland');
insert into plenum.country (name) values ('Turks and Caicos Islands');
insert into plenum.country (name) values ('Chad');
insert into plenum.country (name) values ('French Southern Territories');
insert into plenum.country (name) values ('Togo');
insert into plenum.country (name) values ('Thailand');
insert into plenum.country (name) values ('Tajikistan');
insert into plenum.country (name) values ('Tokelau');
insert into plenum.country (name) values ('Timor-Leste');
insert into plenum.country (name) values ('Turkmenistan');
insert into plenum.country (name) values ('Tunisia');
insert into plenum.country (name) values ('Tonga');
insert into plenum.country (name) values ('Turkey');
insert into plenum.country (name) values ('Trinidad and Tobago');
insert into plenum.country (name) values ('Tuvalu');
insert into plenum.country (name) values ('Taiwan');
insert into plenum.country (name) values ('Tanzania');
insert into plenum.country (name) values ('Ukraine');
insert into plenum.country (name) values ('Uganda');
insert into plenum.country (name) values ('United States Minor Outlying Islands');
insert into plenum.country (name) values ('United States');
insert into plenum.country (name) values ('Uruguay');
insert into plenum.country (name) values ('Uzbekistan');
insert into plenum.country (name) values ('Vatican');
insert into plenum.country (name) values ('Saint Vincent and the Grenadines');
insert into plenum.country (name) values ('Venezuela');
insert into plenum.country (name) values ('Virgin Islands (British)');
insert into plenum.country (name) values ('Virgin Islands (U.S.)');
insert into plenum.country (name) values ('Vietnam');
insert into plenum.country (name) values ('Vanuatu');
insert into plenum.country (name) values ('Wallis and Futuna Islands');
insert into plenum.country (name) values ('Samoa');
insert into plenum.country (name) values ('Yemen');
insert into plenum.country (name) values ('Mayotte');
insert into plenum.country (name) values ('South Africa');
insert into plenum.country (name) values ('Zambia');
insert into plenum.country (name) values ('Zimbabwe');

--Users
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('pputman0', 'PHreK9plUZ8', 'pputman0@usnews.com', true, false, 'Pincus Putman', 'Male', '8 Spaight Terrace', 'Demizz', 'Aenean fermentum. Donec ut mauris eget massa tempor convallis. Nulla neque libero, convallis eget, eleifend luctus, ultricies eu, nibh.', '1994-12-11', 1);
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('belliker1', 'vUf5vxe', 'belliker1@gravatar.com', true, false, 'Betsey Elliker', 'Female', '2216 Nancy Way', 'Brainverse', 'Nam ultrices, libero non mattis pulvinar, nulla pede ullamcorper augue, a suscipit nulla elit ac nulla. Sed vel enim sit amet nunc viverra dapibus. Nulla suscipit ligula in lacus.', '1998-03-24', 2);
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('pfiggs2', 'jFY5qeZeAT0C', 'pfiggs2@google.com.br', true, false, 'Pearla Figgs', 'Female', '854 Cambridge Pass', 'Vitz', 'Curabitur in libero ut massa volutpat convallis. Morbi odio odio, elementum eu, interdum eu, tincidunt in, leo. Maecenas pulvinar lobortis est.', '1991-02-19', 3);
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('pmenendes3', 'yBU47k5sIVop', 'pmenendes3@mlb.com', true, false, 'Patsy Menendes', 'Male', '28 Evergreen Hill', 'Oyope', 'Vestibulum ac est lacinia nisi venenatis tristique. Fusce congue, diam id ornare imperdiet, sapien urna pretium nisl, ut volutpat sapien arcu sed augue. Aliquam erat volutpat.', '1998-08-27', 4);
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('rmathie4', 'frrEEWm', 'rmathie4@nih.gov', true, false, 'Rory Mathie', 'Female', '792 Garrison Park', 'Devcast', 'Fusce posuere felis sed lacus. Morbi sem mauris, laoreet ut, rhoncus aliquet, pulvinar sed, nisl. Nunc rhoncus dui vel sem.', '1994-09-06', 5);
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('kmcritchie5', 'ZZzD5chsNR', 'kmcritchie5@ed.gov', false, true, 'Kattie McRitchie', 'Female', '98951 Hudson Crossing', 'Skyndu', 'Morbi non lectus. Aliquam sit amet diam in magna bibendum imperdiet. Nullam orci pede, venenatis non, sodales sed, tincidunt eu, felis.', '1991-10-05', 6);
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('pkeaves6', '2zTXjXTFUo', 'pkeaves6@is.gd', false, false, 'Puff Keaves', 'Male', '4 Saint Paul Trail', 'Livepath', 'Proin interdum mauris non ligula pellentesque ultrices. Phasellus id sapien in sapien iaculis congue. Vivamus metus arcu, adipiscing molestie, hendrerit at, vulputate vitae, nisl.', '1992-05-22', 7);
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('lsoles7', 'DODIswuA', 'lsoles7@admin.ch', false, false, 'Leesa Soles', 'Female', '2 Oak Valley Way', 'Centizu', 'Proin interdum mauris non ligula pellentesque ultrices. Phasellus id sapien in sapien iaculis congue. Vivamus metus arcu, adipiscing molestie, hendrerit at, vulputate vitae, nisl.', '1994-09-15', 8);
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('dstruttman8', 'rMw3Om', 'dstruttman8@spotify.com', false, false, 'Dareen Struttman', 'Female', '891 Meadow Valley Terrace', 'Topiclounge', 'Maecenas leo odio, condimentum id, luctus nec, molestie sed, justo. Pellentesque viverra pede ac diam. Cras pellentesque volutpat dui.', '1996-06-22', 9);
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('swaylen9', '3tkxbpaRq5Q', 'swaylen9@biglobe.ne.jp', false, false, 'Sibelle Waylen', 'Female', '911 Paget Alley', 'Podcat', 'Quisque porta volutpat erat. Quisque erat eros, viverra eget, congue eget, semper rutrum, nulla. Nunc purus.', '1993-05-20', 10);
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('bjigglea', 'S5xRwPhB', 'bjigglea@yahoo.co.jp', false, false, 'Berkly Jiggle', 'Male', '00981 Packers Place', 'Gabcube', 'In hac habitasse platea dictumst. Morbi vestibulum, velit id pretium iaculis, diam erat fermentum justo, nec condimentum neque sapien placerat ante. Nulla justo.', '1994-11-14', 11);
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('cjulianb', 'WDAd613zAs', 'cjulianb@abc.net.au', false, false, 'Coop Julian', 'Male', '9791 Mcguire Drive', 'Tagfeed', 'Duis bibendum. Morbi non quam nec dui luctus rutrum. Nulla tellus.', '1990-07-31', 12);
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('ltwidlec', 'ZtbKXID', 'ltwidlec@freewebs.com', false, false, 'Linnea Twidle', 'Female', '2915 North Circle', 'Feedfire', 'Integer tincidunt ante vel ipsum. Praesent blandit lacinia erat. Vestibulum sed magna at nunc commodo placerat.', '1993-04-16', 13);
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('ejurgesd', '3weUjK', 'ejurgesd@g.co', false, false, 'Elinore Jurges', 'Female', '539 Maple Wood Way', 'Oyonder', 'In congue. Etiam justo. Etiam pretium iaculis justo.', '1996-05-04', 14);
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('ilanone', 'c34fVIFUP8SQ', 'ilanone@diigo.com', false, false, 'Isak Lanon', 'Male', '2 Oakridge Court', 'Blogtags', 'Fusce posuere felis sed lacus. Morbi sem mauris, laoreet ut, rhoncus aliquet, pulvinar sed, nisl. Nunc rhoncus dui vel sem.', '1999-06-07', 15);
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('dscranneyf', 'ZasqJSdgH2', 'dscranneyf@narod.ru', false, false, 'Dusty Scranney', 'Female', '8 Montana Pass', 'Kazio', 'Cras non velit nec nisi vulputate nonummy. Maecenas tincidunt lacus at velit. Vivamus vel nulla eget eros elementum pellentesque.', '1994-05-25', 16);
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('cstanlackg', 'lRBgvAV', 'cstanlackg@simplemachines.org', false, false, 'Cathee Stanlack', 'Female', '97 Thierer Lane', 'Dabvine', 'Curabitur gravida nisi at nibh. In hac habitasse platea dictumst. Aliquam augue quam, sollicitudin vitae, consectetuer eget, rutrum at, lorem.', '1993-06-03', 17);
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('ccrinageh', 'zy5pNl2rC', 'ccrinageh@yellowbook.com', false, false, 'Chrystal Crinage', 'Female', '385 Northland Alley', 'Blogtags', 'Maecenas ut massa quis augue luctus tincidunt. Nulla mollis molestie lorem. Quisque ut erat.', '1991-02-12', 18);
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('lcasini', 'LFj7FG4cn', 'lcasini@admin.ch', false, false, 'Louella Casin', 'Female', '8543 Manufacturers Trail', 'Topicshots', 'Morbi porttitor lorem id ligula. Suspendisse ornare consequat lectus. In est risus, auctor sed, tristique in, tempus sit amet, sem.', '1992-05-06', 19);
insert into plenum.usertable (username, password, email, premium, banned, name, gender, address, institution, description, birthDate, idCountry) values ('npallaschj', 'lANindUcz6', 'npallaschj@addtoany.com', false, false, 'Neile Pallasch', 'Female', '17881 Gulseth Avenue', 'Realpoint', 'Morbi non lectus. Aliquam sit amet diam in magna bibendum imperdiet. Nullam orci pede, venenatis non, sodales sed, tincidunt eu, felis.', '1990-07-11', 20);


--PremiumSignature
insert into plenum.premiumsignature (idPremium, startDate, duration, idUser) values (1, '2017-10-20', interval '5 year', 1);
insert into plenum.premiumsignature (idPremium, startDate, duration, idUser) values (2, '2017-11-05', interval '5 year', 2);
insert into plenum.premiumsignature (idPremium, startDate, duration, idUser) values (3, '2017-06-17', interval '5 year', 3);
insert into plenum.premiumsignature (idPremium, startDate, duration, idUser) values (4, '2017-03-01', interval '5 year', 4);
insert into plenum.premiumsignature (idPremium, startDate, duration, idUser) values (5, '2017-07-10', interval '5 year', 5);

--Project
insert into plenum.project (creationDate, name, description, private) values ('2017-03-05', 'Tin', 'Maecenas leo odio, condimentum id, luctus nec, molestie sed, justo. Pellentesque viverra pede ac diam. Cras pellentesque volutpat dui.', true);
insert into plenum.project (creationDate, name, description, private) values ('2017-03-03', 'Treeflex', 'Aenean fermentum. Donec ut mauris eget massa tempor convallis. Nulla neque libero, convallis eget, eleifend luctus, ultricies eu, nibh.', true);
insert into plenum.project (creationDate, name, description, private) values ('2017-03-18', 'Sub-Ex', 'In sagittis dui vel nisl. Duis ac nibh. Fusce lacus purus, aliquet at, feugiat non, pretium quis, lectus.', false);
insert into plenum.project (creationDate, name, description, private) values ('2017-03-14', 'Bamity', 'Pellentesque at nulla. Suspendisse potenti. Cras in purus eu magna vulputate luctus.', false);
insert into plenum.project (creationDate, name, description, private) values ('2017-02-09', 'Voltsillam', 'Suspendisse potenti. In eleifend quam a odio. In hac habitasse platea dictumst.', true);

--Joined
insert into plenum.joined (idUser, idProject, joinedDate, role) values (1, 1, '2017-10-22', 'Owner');
insert into plenum.joined (idUser, idProject, joinedDate, role) values (2, 2, '2017-11-07', 'Owner');
insert into plenum.joined (idUser, idProject, joinedDate, role) values (3, 3, '2017-06-21', 'Owner');
insert into plenum.joined (idUser, idProject, joinedDate, role) values (4, 4, '2017-03-06', 'Owner');
insert into plenum.joined (idUser, idProject, joinedDate, role) values (5, 5, '2017-07-19', 'Owner');
insert into plenum.joined (idUser, idProject, joinedDate, role) values (6, 1, '2017-09-22', 'Coordinator');
insert into plenum.joined (idUser, idProject, joinedDate, role) values (7, 2, '2017-04-27', 'Coordinator');
insert into plenum.joined (idUser, idProject, joinedDate, role) values (8, 3, '2017-04-27', 'Coordinator');
insert into plenum.joined (idUser, idProject, joinedDate, role) values (9, 4, '2017-07-03', 'Coordinator');
insert into plenum.joined (idUser, idProject, joinedDate, role) values (10, 5, '2017-06-29', 'Coordinator');
insert into plenum.joined (idUser, idProject, joinedDate, role) values (11, 1, '2017-09-22', 'Member');
insert into plenum.joined (idUser, idProject, joinedDate, role) values (12, 2, '2017-09-22', 'Member');
insert into plenum.joined (idUser, idProject, joinedDate, role) values (13, 3, '2017-09-25', 'Member');
insert into plenum.joined (idUser, idProject, joinedDate, role) values (14, 4, '2017-09-22', 'Member');
insert into plenum.joined (idUser, idProject, joinedDate, role) values (15, 5, '2017-09-23', 'Member');
insert into plenum.joined (idUser, idProject, joinedDate, role) values (16, 1, '2017-09-22', 'Member');
insert into plenum.joined (idUser, idProject, joinedDate, role) values (17, 2, '2017-09-21', 'Member');
insert into plenum.joined (idUser, idProject, joinedDate, role) values (18, 3, '2017-09-22', 'Member');
insert into plenum.joined (idUser, idProject, joinedDate, role) values (19, 4, '2017-09-20', 'Member');
insert into plenum.joined (idUser, idProject, joinedDate, role) values (20, 5, '2017-09-22', 'Member');


--ForumPost
insert into plenum.forumpost (creationDate, lastEditDate, title, content, idProject, idUser) values ('2017-04-17', '2018-01-17', 'Enhanced global customer loyalty', 'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Proin risus. Praesent lectus.', 1, 1);
insert into plenum.forumpost (creationDate, lastEditDate, title, content, idProject, idUser) values ('2017-04-06', NULL, 'Triple-buffered secondary product', 'Nullam sit amet turpis elementum ligula vehicula consequat. Morbi a ipsum. Integer a nibh.', 2, 2);
insert into plenum.forumpost (creationDate, lastEditDate, title, content, idProject, idUser) values ('2017-06-19', '2018-02-25', 'Devolved dynamic structure', 'Fusce posuere felis sed lacus. Morbi sem mauris, laoreet ut, rhoncus aliquet, pulvinar sed, nisl. Nunc rhoncus dui vel sem.', 3, 3);
insert into plenum.forumpost (creationDate, lastEditDate, title, content, idProject, idUser) values ('2018-02-23', NULL, 'Automated bottom-line challenge', 'Sed ante. Vivamus tortor. Duis mattis egestas metus.', 4, 4);
insert into plenum.forumpost (creationDate, lastEditDate, title, content, idProject, idUser) values ('2017-06-18', '2017-10-27', 'Re-contextualized multi-tasking process improvement', 'Integer tincidunt ante vel ipsum. Praesent blandit lacinia erat. Vestibulum sed magna at nunc commodo placerat.', 5, 5);

--Reply
insert into plenum.reply (creationDate, lastEditDate, content, idPost, idUser) values ('2017-04-30', NULL, 'Duis bibendum, felis sed interdum venenatis, turpis enim blandit mi, in porttitor pede justo eu massa. Donec dapibus. Duis at velit eu est congue elementum.', 1, 6);
insert into plenum.reply (creationDate, lastEditDate, content, idPost, idUser) values ('2018-03-21', NULL, 'Maecenas ut massa quis augue luctus tincidunt. Nulla mollis molestie lorem. Quisque ut erat.', 2, 7);
insert into plenum.reply (creationDate, lastEditDate, content, idPost, idUser) values ('2017-04-12', NULL, 'Maecenas leo odio, condimentum id, luctus nec, molestie sed, justo. Pellentesque viverra pede ac diam. Cras pellentesque volutpat dui.', 3, 8);
insert into plenum.reply (creationDate, lastEditDate, content, idPost, idUser) values ('2017-09-23', '2017-09-25', 'Integer ac leo. Pellentesque ultrices mattis odio. Donec vitae nisi.', 4, 9);
insert into plenum.reply (creationDate, lastEditDate, content, idPost, idUser) values ('2017-08-09', NULL, 'Fusce consequat. Nulla nisl. Nunc nisl.', 5, 10);

--Task
insert into plenum.task (creationDate, lastEditDate, title, description, deadline, completed, completetionDate, idUser, idProject) values ('2017-07-03', '2017-07-05', 'Customizable neutral circuit', 'Sed ante. Vivamus tortor. Duis mattis egestas metus.', '2018-05-04', true, '2018-05-13', 1, 1);
insert into plenum.task (creationDate, lastEditDate, title, description, deadline, completed, completetionDate, idUser, idProject) values ('2017-06-18', '2017-08-19', 'De-engineered multi-state structure', 'Vestibulum quam sapien, varius ut, blandit non, interdum in, ante. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Duis faucibus accumsan odio. Curabitur convallis.', '2018-05-01', false, NULL, 2, 2);
insert into plenum.task (creationDate, lastEditDate, title, description, deadline, completed, completetionDate, idUser, idProject) values ('2017-06-29', '2017-06-25', 'Face to face foreground migration', 'Cras mi pede, malesuada in, imperdiet et, commodo vulputate, justo. In blandit ultrices enim. Lorem ipsum dolor sit amet, consectetuer adipiscing elit.', '2018-05-20', false, NULL, 3, 3);
insert into plenum.task (creationDate, lastEditDate, title, description, deadline, completed, completetionDate, idUser, idProject) values ('2018-01-19', '2017-04-25', 'Polarised secondary challenge', 'Curabitur at ipsum ac tellus semper interdum. Mauris ullamcorper purus sit amet nulla. Quisque arcu libero, rutrum ac, lobortis vel, dapibus at, diam.', '2018-05-25', true, '2018-05-29', 4, 4);
insert into plenum.task (creationDate, lastEditDate, title, description, deadline, completed, completetionDate, idUser, idProject) values ('2017-03-25', '2017-05-29', 'Multi-tiered upward-trending hardware', 'Cras mi pede, malesuada in, imperdiet et, commodo vulputate, justo. In blandit ultrices enim. Lorem ipsum dolor sit amet, consectetuer adipiscing elit.', '2018-05-08', false, NULL, 5, 5);

--Assigned
insert into plenum.assigned (idUser, idTask) values (1, 1);
insert into plenum.assigned (idUser, idTask) values (2, 2);
insert into plenum.assigned (idUser, idTask) values (3, 3);
insert into plenum.assigned (idUser, idTask) values (4, 4);
insert into plenum.assigned (idUser, idTask) values (5, 5);

--EditTaskInfo
insert into plenum.edittaskinfo (idUser, idTask, editDate) values (1, 1, '2017-07-05');

--Comment
insert into plenum.comment (creationDate, lastEditDate, content, idTask, idUser) values ('2017-01-12', '2017-09-12', 'Quisque porta volutpat erat. Quisque erat eros, viverra eget, congue eget, semper rutrum, nulla. Nunc purus.', 1, 1);
insert into plenum.comment (creationDate, lastEditDate, content, idTask, idUser) values ('2017-04-03', '2017-05-07', 'Aenean lectus. Pellentesque eget nunc. Donec quis orci eget orci vehicula condimentum.', 2, 2);
insert into plenum.comment (creationDate, lastEditDate, content, idTask, idUser) values ('2017-10-01', NULL, 'Maecenas ut massa quis augue luctus tincidunt. Nulla mollis molestie lorem. Quisque ut erat.', 3, 3);
insert into plenum.comment (creationDate, lastEditDate, content, idTask, idUser) values ('2017-09-25', '2018-03-12', 'Proin interdum mauris non ligula pellentesque ultrices. Phasellus id sapien in sapien iaculis congue. Vivamus metus arcu, adipiscing molestie, hendrerit at, vulputate vitae, nisl.', 4, 4);
insert into plenum.comment (creationDate, lastEditDate, content, idTask, idUser) values ('2017-07-12', NULL, 'Nulla ut erat id mauris vulputate elementum. Nullam varius. Nulla facilisi.', 5, 5);
insert into plenum.comment (creationDate, lastEditDate, content, idTask, idUser) values ('2017-03-02', '2017-07-19', 'Morbi porttitor lorem id ligula. Suspendisse ornare consequat lectus. In est risus, auctor sed, tristique in, tempus sit amet, sem.', 1, 6);
insert into plenum.comment (creationDate, lastEditDate, content, idTask, idUser) values ('2017-10-01', NULL, 'Duis bibendum, felis sed interdum venenatis, turpis enim blandit mi, in porttitor pede justo eu massa. Donec dapibus. Duis at velit eu est congue elementum.', 2, 7);

insert into plenum.comment (creationDate, lastEditDate, content, idTask, idUser, idParent) values ('2018-03-03', NULL, 'Suspendisse ornare consequat lectus. In est risus, auctor sed, tristique in, tempus sit amet, sem.', 1, 1, 6);
--Tag
insert into plenum.tag (name) values ('full-range');
insert into plenum.tag (name) values ('moderator');
insert into plenum.tag (name) values ('capability');
insert into plenum.tag (name) values ('success');
insert into plenum.tag (name) values ('support');
insert into plenum.tag (name) values ('multi-tasking');
insert into plenum.tag (name) values ('interactive');
insert into plenum.tag (name) values ('moratorium');
insert into plenum.tag (name) values ('contextually-based');
insert into plenum.tag (name) values ('system engine');

--Tagged
insert into plenum.tagged (idTask, idTag) values (1, 1);
insert into plenum.tagged (idTask, idTag) values (2, 2);
insert into plenum.tagged (idTask, idTag) values (3, 3);
insert into plenum.tagged (idTask, idTag) values (4, 4);
insert into plenum.tagged (idTask, idTag) values (5, 5);

--CloseRequest
insert into plenum.closerequest (creationDate, title, description, approved, idUser, idTask) values ('2018-03-04', 'Distributed demand-driven forecast', 'Pellentesque at nulla. Suspendisse potenti. Cras in purus eu magna vulputate luctus.', false, 1, 1);
insert into plenum.closerequest (creationDate, title, description, approved, idUser, idTask) values ('2018-03-02', 'Progressive upward-trending hierarchy', 'Quisque porta volutpat erat. Quisque erat eros, viverra eget, congue eget, semper rutrum, nulla. Nunc purus.', false, 2, 2);
insert into plenum.closerequest (creationDate, title, description, approved, idUser, idTask) values ('2018-01-06', 'Switchable leading edge pricing structure', 'Vestibulum quam sapien, varius ut, blandit non, interdum in, ante. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Duis faucibus accumsan odio. Curabitur convallis.', false, 3, 3);
insert into plenum.closerequest (creationDate, title, description, approved, idUser, idTask) values ('2018-03-11', 'Digitized high-level analyzer', 'Nulla ut erat id mauris vulputate elementum. Nullam varius. Nulla facilisi.', false, 4, 4);
insert into plenum.closerequest (creationDate, title, description, approved, idUser, idTask) values ('2018-03-14', 'Profit-focused demand-driven workforce', 'Cras mi pede, malesuada in, imperdiet et, commodo vulputate, justo. In blandit ultrices enim. Lorem ipsum dolor sit amet, consectetuer adipiscing elit.', true, 5, 5);

--Admin
insert into plenum.admin (username, email, password) values ('barbosa','up201503477@fe.up.pt' ,'03ac674216f3e15c761ee1a5e255f067953623c8b388b4459e13f978d7c846f4');
insert into plenum.admin (username, email, password) values ('mario','up201503406@fe.up.pt' ,'03ac674216f3e15c761ee1a5e255f067953623c8b388b4459e13f978d7c846f4');
insert into plenum.admin (username, email, password) values ('mateus','up201601876@fe.up.pt' ,'03ac674216f3e15c761ee1a5e255f067953623c8b388b4459e13f978d7c846f4');
insert into plenum.admin (username, email, password) values ('jotapsa','up201506252@fe.up.pt' ,'03ac674216f3e15c761ee1a5e255f067953623c8b388b4459e13f978d7c846f4');

--BannedRecord
insert into plenum.bannedrecord (startDate, duration, motive, idUser, idAdmin) values ('2018-01-20', interval '6 months', 'Nulla ut erat id mauris vulputate elementum. Nullam varius. Nulla facilisi.', 6, 1);
```
[Link to the SQL script included in the repository.](https://github.com/mpcmarques/lbaw1743/blob/master/database/inserts.sql)

<!-- ## Revision history

Changes made to the first submission:
1. Item 1
1. Item 2 -->

***

GROUP1743, 01/04/2018

> Mateus Pedroza Cortes Marques, up201601876@fe.up.pt
> Bernardo Manuel Costa Barbosa, up201503477@fe.up.pt
> João Pedro Teixeira Pereira de Sá, up201506252@fe.up.pt
> Mário Rui Macedo Flores dos Santos, up201503406@fe.up.pt
